#pragma checksum "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "42af03c0faec41b8546c9f83d1977841f53df8b3"
// <auto-generated/>
#pragma warning disable 1591
namespace RSV_dashboard.Bot.Components
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\_Imports.razor"
using RSV_dashboard;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\_Imports.razor"
using RSV_dashboard.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\_Imports.razor"
using MudBlazor;

#line default
#line hidden
#nullable disable
    public partial class ChatWindow : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<style type=\"text/css\">\n    .chat-window {\n        max-width: 800px;\n    }\n\n    .chat-header {\n        height: 50px;\n        background-color: #343a40;\n        font-family: \'Oswald\', sans-serif !important;\n        font-size: 28px;\n        color: white;\n        border-radius: 30px 30px 0px 0px;\n        text-align: center;\n        vertical-align: middle;\n        line-height: 50px;\n    }\n    .bot-header {\n        padding-top:2px;\n        height: 20px;\n        background-color: #343a40;\n        font-family: \'Oswald\', sans-serif !important;\n        font-size: 11px;\n        color: white;\n        text-align: center;\n        vertical-align: middle;\n    }\n\n    .chat-area {\n        height: 400px;\n        background-color: #f8f9fa;\n        padding: 10px 10px 10px 10px;\n        overflow-x: hidden;\n        overflow-x: auto;\n    }\n\n    .chat-list {\n        padding: 0;\n        width: 100%;\n        list-style-type: none;\n    }\n\n    .chat-input {\n        min-height: 80px;\n        background-color: #e9ecef;\n        padding: 5px 5px 5px 5px;\n    }\n\n    .message {\n        width: 100%;\n        display: inline-block;\n        margin-bottom: 10px;\n    }\n\n    .user-datestamp {\n        font-size: 12px;\n        width: 100%;\n        text-align: right;\n    }\n\n    .bot-datestamp {\n        font-size: 12px;\n        width: 100%;\n        text-align: left;\n    }\n\n    .user-message-container {\n        float: right;\n        background-color: #17a2b8;\n        border-radius: 12px;\n        border-bottom-right-radius: 2px;\n        position: relative;\n        display: inline-block;\n        word-wrap: break-word;\n        font-size: 16px;\n        color: white;\n        padding: 15px 15px 15px 15px;\n        max-width: 90%\n    }\n\n    .bot-message-container {\n        float: left;\n        background-color: #fd7e14;\n        border-radius: 12px;\n        border-bottom-left-radius: 2px;\n        position: relative;\n        display: inline-block;\n        word-wrap: break-word;\n        font-size: 16px;\n        color: white;\n        padding: 15px 15px 15px 15px;\n        max-width: 90%\n    }\n</style>\n\n\n");
            __builder.OpenElement(1, "div");
            __builder.AddAttribute(2, "class", "chat-window");
            __builder.AddMarkupContent(3, "<div class=\"chat-header\">chattr</div>\n    ");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "bot-header");
            __builder.AddContent(6, "Now speaking with \'");
            __builder.AddContent(7, 
#nullable restore
#line 99 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
                                                config.BotName

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(8, "\'");
            __builder.CloseElement();
            __builder.AddMarkupContent(9, "\n    ");
            __builder.OpenElement(10, "div");
            __builder.AddAttribute(11, "class", "chat-area");
            __builder.AddAttribute(12, "id", "ChatBody");
            __builder.OpenElement(13, "ul");
            __builder.AddAttribute(14, "class", "chat-list");
#nullable restore
#line 102 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
             foreach (var msg in SessionMessages)
            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(15, "li");
            __builder.AddAttribute(16, "class", "message");
#nullable restore
#line 105 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
                     if (msg.Type == RSV_dashboard.Bot.Models.SessionMessage.MessageType.UserMessage)
                    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(17, "div");
            __builder.AddAttribute(18, "class", "user-datestamp");
            __builder.AddContent(19, 
#nullable restore
#line 107 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
                                                     msg.DateStamp

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(20, "\n                        ");
            __builder.OpenElement(21, "div");
            __builder.AddAttribute(22, "class", "user-message-container");
            __builder.OpenElement(23, "div");
            __builder.AddAttribute(24, "class", "message-body");
            __builder.AddContent(25, 
#nullable restore
#line 108 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
                                                                                       msg.MessageContent

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 109 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
                    }
                    else
                    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(26, "div");
            __builder.AddAttribute(27, "class", "bot-datestamp");
            __builder.AddContent(28, 
#nullable restore
#line 112 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
                                                    msg.DateStamp

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(29, "\n                        ");
            __builder.OpenElement(30, "div");
            __builder.AddAttribute(31, "class", "bot-message-container");
            __builder.OpenElement(32, "div");
            __builder.AddAttribute(33, "class", "message-body");
            __builder.AddContent(34, 
#nullable restore
#line 113 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
                                                                                      msg.MessageContent

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 114 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 116 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(35, "\n    ");
            __builder.OpenElement(36, "div");
            __builder.AddAttribute(37, "class", "chat-input");
            __builder.OpenElement(38, "div");
            __builder.AddAttribute(39, "class", "form-group");
            __builder.AddMarkupContent(40, "<small for=\"inputBox\">Enter a message</small>\n            ");
            __builder.OpenElement(41, "div");
            __builder.AddAttribute(42, "class", "input-group");
            __builder.OpenElement(43, "input");
            __builder.AddAttribute(44, "type", "text");
            __builder.AddAttribute(45, "id", "inputBox");
            __builder.AddAttribute(46, "class", "form-control");
            __builder.AddAttribute(47, "placeholder", "Enter Message");
            __builder.AddAttribute(48, "onkeyup", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#nullable restore
#line 124 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
                                                                                                                                (e) => KeyUp(e)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(49, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 124 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
                                                                                                         UserMessage

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(50, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => UserMessage = __value, UserMessage));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.OpenElement(51, "button");
            __builder.AddAttribute(52, "class", "btn btn-primary");
            __builder.AddAttribute(53, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 124 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
                                                                                                                                                                                             ProcessMessage

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(54, "Send");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 131 "D:\Университет\4 семестр\Коллективная ID-деятельность\Collective-IT-Development\RSV_dashboard\RSV_dashboard\Bot\Components\ChatWindow.razor"
 
    [Parameter]
    public string fileName { get; set; }
    public Bot.Models.BotConfig config { get; set; }
    public Guid SessionID { get; set; } = Guid.NewGuid();
    private string UserMessage { get; set; }
    private List<Models.SessionMessage> SessionMessages { get; set; } = new List<Models.SessionMessage>();
    protected override void OnInitialized()
    {

        var text = System.IO.File.ReadAllText(fileName);

        Newtonsoft.Json.JsonSerializerSettings settings = new Newtonsoft.Json.JsonSerializerSettings()
            {
                TypeNameHandling = Newtonsoft.Json.TypeNameHandling.Auto
            };


        config = Newtonsoft.Json.JsonConvert.DeserializeObject<Models.BotConfig>(text, settings);
        SessionMessages.Add(new Models.SessionMessage() { MessageContent = config.BotGreeting, Type = Models.SessionMessage.MessageType.BotMessage });
    }

    private void ProcessMessage()
    {
        SessionMessages.Add(new Models.SessionMessage() { MessageContent = UserMessage, Type = Models.SessionMessage.MessageType.UserMessage });
        RSV_dashboard.Bot.Services.Platform.ChatEngine.ProcessChat(config, SessionID, UserMessage, SessionMessages);
        UserMessage = string.Empty;
        //todo implement scrollchat callback
    }
    private void KeyUp(KeyboardEventArgs e)
    {
        if (e.Key == "Enter")
            ProcessMessage();

   
    }
    private async void ScrollChat()
    {
        await JSRuntime.InvokeAsync<string>("scrollChat");
    }


#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
    }
}
#pragma warning restore 1591
